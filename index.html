<!DOCTYPE HTML>
<meta charset="utf-8">
<title>¿Más Bebés?</title>
<base target="_blank">
<style>
html, body {
  padding: 0px;
  background: black;
  margin: 0px;
  padding: 0px;
  overflow: hidden;
  font-family: "Helvetica Neue", Helvetica, sans-serif;
}

.primary-sync-source {
  position: absolute;
  top: 0px;
  left: 0px;
  width: 100%;
}

div.interactive {
  position: absolute;
  bottom: 5px;
  left: 10px;
  right: 10px;
  text-align: center;
}

div.thumbnails {
  font-size: 0px;
}

div.thumbnails img {
  width: 10%;
  -moz-transition-property: width, opacity;
  -moz-transition-duration: 0.5s;
  -webkit-transition-property: width, opacity;
  -webkit-transition-duration: 0.5s;
  -o-transition-property: width, opacity;
  -o-transition-duration: 0.5s;
  padding: 0px;
  opacity: 0.5;
  cursor: pointer;
}

div.thumbnails div {
  position: relative;
  display: inline;
}

div.thumbnails div span.year {
  position: absolute;
  color: white;
  font-size: 12px;
  font-weight: bold;
  text-shadow: 2px 2px 3px black;
  padding: 4px;
  bottom: 0px;
  right: 0px;
  pointer-events: none;
}

div.thumbnails div.active img {
  opacity: 1.0;
  width: 15%;
}

div.thumbnails img:hover {
  opacity: 1.0;  
}

ul.additional-media {
  list-style-type: none;
  font-size: 12px;
  padding: 0;
}

ul.additional-media li {
  display: inline;
  white-space: nowrap;
}

ul.additional-media li a {
  opacity: 0.2;
  color: white;
  text-decoration: none;
  -moz-transition: opacity 0.5s;
  -webkit-transition: opacity 0.5s;
  -o-transition: opacity 0.5s;
}

ul.additional-media li.active a {
  opacity: 0.8;
}

ul.additional-media li a:hover {
  opacity: 1.0;
}

ul.additional-media li:after {
  opacity: 0.1;
  color: white;
  content: '/';
}

ul.additional-media li:last-child:after {
  content: none;
}

ul.additional-media span.year:before {
  content: ' - ';
}

div.lightbox-overlay {
  z-index: 5000;
  position: absolute;
  top: 0px;
  left: 0px;
  right: 0px;
  bottom: 0px;
  background: rgba(0, 0, 0, 0.5);
}

div.lightbox-close-button {
  text-align: right;
  padding: 3px;
  cursor: pointer;
  background: rgba(255, 255, 255, 0.05);
}

div.lightbox-close-button:after {
  color: white;
  content: "x";
}

div.lightbox-close-button:hover {
  background: firebrick;
  color: white;
}

div.lightbox-window {
  position: relative;
  color: black;
  width: 60%;
  margin: 5% auto;
}

div.lightbox-content {
  background: transparent;
}

div.lightbox-content video {
  width: 100%;
}

a.project-link {
  display: block;
  position: absolute;
  right: 0px;
  top: 0px;
  padding: 8px;
  text-decoration: none;
  color: white;
  font-family: Baskerville, Georgia, serif;
  opacity: 0.5;
  font-style: italic;
  -moz-transition: opacity 1s;
  -webkit-transition: opacity 1s;
  -o-transition: opacity 1s;
}

a.project-link:hover {
  opacity: 1.0;
}

.ribbon {
  display: block;
  position: absolute;
  top: 10%;
  left: 0px;
  padding: 10px;
  font-size: 20px;
  color: white;
  background: rgba(0, 0, 0, 0.75);
}

.titles div span.year {
  opacity: 0;
  -moz-transition: opacity 0.5s;
}

.titles div.active span.year {
  opacity: 1;
}

.pause-indicator {
  color: yellow;
  z-index: 500;
}

.pause-indicator .instructions {
  font-size: 10px;
}

.content {
  position: relative;
  margin: 0 auto;
}
</style>
<div class="content">
  <video autoplay class="primary-sync-source">
    <source src="http://labs.toolness.com/temp/mas-bebe/masbebes-854x480.mp4"></source>
    <source src="http://labs.toolness.com/temp/mas-bebe/masbebes-854x480.webm"></source>    
  </video>
  <a class="project-link" href="http://laprensa-sandiego.org/featured/%C2%BFmas-bebes-documentary-on-sterilization-of-hispanic-women-2/">¿Más Bebés?</a>
  <div class="lightbox-overlay" style="display: none">
    <div class="lightbox-window">
      <div class="lightbox-close-button"></div>
      <div class="lightbox-content"></div>
    </div>
  </div>
  <div class="interactive">
    <div class="thumbnails">
      <div data-active-during="3-5">
        <img src="timeline_images/1927.jpg">
        <span class="year">1927</span>
      </div>
      <div data-active-during="23-31">
        <img src="timeline_images/1941.jpg">
        <span class="year">1941</span>
      </div>
      <div data-active-during="32-40">
        <img src="timeline_images/1945.jpg">
        <span class="year">1945</span>
      </div>
      <div data-active-during="41-49">
        <img src="timeline_images/1965.jpg">
        <span class="year">1965</span>
      </div>
      <div data-active-during="64-73">
        <img src="timeline_images/1968.jpg">
        <span class="year">1968</span>
      </div>
      <div data-active-during="74-92">
        <img src="timeline_images/1973.jpg">
        <span class="year">1973</span>
      </div>
      <div data-active-during="146-155">
        <img src="timeline_images/1980.jpg">
        <span class="year">1980</span>
      </div>
      <div data-active-during="180-188">
        <img src="timeline_images/1994.jpg">
        <span class="year">1994</span>
      </div>
      <div data-active-during="193-206">
        <img src="timeline_images/2011.jpg">
        <span class="year">today</span>
      </div>
    </div>
    <ul class="additional-media">
      <li data-active-during="2-6">
        <a class="lightbox" href="http://labs.toolness.com/temp/mas-bebe/darwin.webm">Supreme Court <span class="year">1927</span></a>
      </li>
      <li data-active=during="33-41">
        <a class="lightbox" href="http://videos-origin.mozilla.org/serv/webmademovies/itvs/masbebes/1945_OperationWetback.webm">Mexican Border <span class="year">1945</span></a>
      </li>
      <li data-active-during="42-50">
        <a class="lightbox" href="http://labs.toolness.com/temp/mas-bebe/operacion.webm">Puerto Rico  <span class="year">1965</span></a>
      </li>
      <li data-active-during="65-74">
        <a class="lightbox" href="http://videos-origin.mozilla.org/serv/webmademovies/itvs/masbebes/1968_NixonBC_Appalachia.webm">Appalachia <span class="year">1968</span></a>
      </li>
      <li data-active-during="66-75">
        <a class="lightbox" href="http://videos-origin.mozilla.org/serv/webmademovies/itvs/masbebes/1972_Rumsfeld.webm">Rumsfeld <span class="year">1972</span></a>
      </li>
      <li data-active-during="75-93">
        <a class="lightbox" href="http://labs.toolness.com/temp/mas-bebe/nixon.webm">Nixon <span class="year">1972</span></a>
      </li>
      <li data-active-during="147-156">
        <a class="lightbox" href="http://videos-origin.mozilla.org/serv/webmademovies/itvs/masbebes/1980_VirginiaSterilization_.webm">Virginia <span class="year">1980</span></a>
      </li>
      <li data-active-during="148-157">
        <a class="lightbox" href="http://videos-origin.mozilla.org/serv/webmademovies/itvs/masbebes/1980_Sterilization_News_Map.webm">Nationwide <span class="year">1980</span></a>
      </li>
      <li data-active-during="181-189">
        <a class="lightbox" href="http://labs.toolness.com/temp/mas-bebe/wilson.webm">California <span class="year">1994</span></a>
      </li>
    </ul>
  </div>
  <div class="pause-indicator ribbon" style="display: none">
    Video paused.
    <div class="instructions">Click to continue playback.</div>
  </div>
  <div class="titles"></div>
</div>
<script src="popcorn.js"></script>
<script src="popcorn.code.js"></script>
<script src="jquery.min.js"></script>
<script src="instapoppin.js"></script>
<script src="instapoppin.jquery.js"></script>
<script src="constrain-aspect.jquery.js"></script>
<script>
// We want the year to show up in the frame as well as
// the timeline thumbnails. To avoid repeating ourselves in
// the HTML markup, we'll just do some DOM manipulation here.
$(".thumbnails div").clone().appendTo(".titles");
$(".titles div").children().not(".year").remove();
$(".titles .year").addClass('ribbon');

$(window).ready(function() {
  var video = $(".primary-sync-source")[0];

  // Always make sure our movie frame and the web content inside it
  // are widescreen.
  $(".content").constrainAspect(16, 9);

  // Some browsers, most notably Mobile Safari on iPad, don't honor
  // the autoplay attribute "to prevent unsolicited downloads over
  // cellular networks at the user's expense", so we need to provide
  // a UI to start the video.
  //
  // Unfortunately, said browsers don't offer a way to detect that
  // they don't autoplay, so we'll have to resort to user-agent
  // sniffing.
  if (navigator.userAgent.match(/iPad/))
    $(".pause-indicator").show();

  // Clicking on the video should toggle pause/play.
  $(video).mousedown(function() {
    if (video.paused) {
      $(".pause-indicator").hide();
      video.play();
    } else {
      $(".pause-indicator").show();
      video.pause();
    }
  });
  
  // When user clicks on a timeline thumbnail, take the main video straight
  // to its "chapter".
  $(".thumbnails div").click(function goToChapterStart() {
    video.currentTime = $(this).activeDurations(0).start;
  });

  // When a lightbox with a video is closed, continue playing the main
  // video.
  $(".lightbox-close-button").click(function closeLightbox() {
    $("div.lightbox-overlay").fadeOut(function() {
      $("div.lightbox-content").empty();
      if (!$(video).data("wasVideoPaused"))
        video.play();
    });
  });

  // When the user clicks on a hyperlink that is meant to be played in
  // a lightbox, prevent the default behavior and show the video in 
  // the lightbox.
  $("a.lightbox").click(function showInLightbox() {
    var lightboxVideo = $("<video autoplay controls>");
    $(video).data("wasVideoPaused", video.paused);
    video.pause();
    lightboxVideo.attr("src", this.href);
    lightboxVideo.bind("ended", function() {
      $(".lightbox-close-button").click();
    });
    $("div.lightbox-content").append(lightboxVideo);    
    $("div.lightbox-overlay").fadeIn();
    return false;
  });
});
</script>
